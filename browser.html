<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Demo</title>
        <meta name="keywords" content=""/>
        <meta name="description" content="This is auto-generated by sublime-custom-insert"/>
        <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
        <meta name="revised" value="yanni4night,2015/11/24"/>
        <style type="text/css">
        li {margin-top: 10px}
        .warn{color: #E27B44}
        .error{color: red}
        .log{color:green}
        .info{color: blue}
        </style>
        <script type="text/javascript">
        function $(selector){
            return document.querySelector(selector);
        }
        function showLog(msg){
            var p =document.createElement('p');
            p.innerHTML=msg;
            document.querySelector('#log').appendChild(p);
        }
        var state = 'pending';
        document.addEventListener('JsBridgeReady', function (evt) {
            state = JsBridge.readyState;
        });
        </script>
    </head>
    <body>
    <h1>DEMO</h1>
    
    <div>
        <label for="吧名"><input type="text" placeholder="吧名" id="forumName"></label>
        <button id="tofrs">toFRS</button>
    </div>
    <div>
        <label for="toastMsg"><input type="text" placeholder="消息" id="toastMsg"></label>
        <button id="toast">toast</button>
    </div>
    <button id="network">network</button>
    <pre id="log"></pre>
    </body>
    <script>
    $('#tofrs').addEventListener('click',function(){
        var forumName = $('#forumName').value;
        if(state === 'complete'){
            JsBridge.testCmd.goToFrsByForumName(encodeURIComponent(forumName)).then(function(){
                showLog('去FRS成功');
            },function(e){
                showLog('ERROR:' + e.message);
            });
        }
    },false);

    $('#toast').addEventListener('click',function(){
        var forumName = $('#toastMsg').value;
        if(state === 'complete'){
            JsBridge.testCmd.showToast(forumName).then(function(){
                showLog('toast成功');
            },function(e){
                showLog('ERROR:' + e.message);
            });
        }
    },false);

    $('#network').addEventListener('click',function(){
        if(state === 'complete'){
            JsBridge.testCmd.httpRequest().then(function(){
                  showLog('网络请求成功');
            },function(e){
                showLog('ERROR:' + e.message);
            });
        }
    },false);
    </script>
    <script src="bridge.dist.js"></script>
    <script src="browser.dist.js"></script>
</html>