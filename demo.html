<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Demo</title>
        <meta content="width=device-width,initial-scale=1,user-scalable=no" name="viewport">
        <meta name="keywords" content=""/>
        <meta name="description" content="This is auto-generated by sublime-custom-insert"/>
        <meta name="revised" value="yanni4night,2015/11/24"/>
        <link rel="stylesheet" href="./mocha.css">
        <style type="text/css">
        li {margin-top: 10px}
        .warn{color: #E27B44}
        .error{color: red}
        .log{color:green}
        .info{color: blue}
        </style>
        <script type="text/javascript">
        function $(msg){
            document.querySelector('#log').innerHTML = msg;
        }

        document.addEventListener('JsBridgeReady', function (evt) {
            try{
                if('complete' === JsBridge.readyState) {
                JsBridge.testCmd.doTest('This is from webview').then(function(){
                        $('调用testCmd.doTest成功');
                    }, function(){
                        $('调用testCmd.doTest失败');
                    });
                } else {
                    $('桥初始化失败');
                }
            }catch(e){
                $(e.message);
            }
        });
        </script>
    </head>
    <body>
    <h1>DEMO</h1>
    <div id="mocha"></div>
    <div id="log"></div>
    </body>
    <script src="./mocha.js"></script>
    <script>mocha.setup('bdd');</script>
    <script src="./test.dist.js"></script>
    <script>
    //mocha.checkLeaks();
    //mocha.globals(['jQuery']);
    mocha.run();
  </script>
</html>